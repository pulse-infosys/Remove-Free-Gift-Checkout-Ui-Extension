Here is the Two Logic in Checkout Ui extension 

1. Cart total based product remove add if thresold hit  below 299 so free product remove and if thresold success above 299 so free product will again readd...
2. Product level baesd free product remove or add.. if main product id here in cart so produt will remove and main product id is here so we do not applied any action..